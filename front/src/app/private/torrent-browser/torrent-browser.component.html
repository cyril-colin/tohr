<div class="dashboard">
  <ng-container *ngIf="(torrentDestinations$ | async) as destinations">
    <ng-container *ngIf="destinations.length > 0; else distEmpty">
      <form [formGroup]=form>
        <input class="input-text" type="text" [formControl]="form.get('search')"
          placeholder="{{ 'browser.placeholderSearch' | translate }}">

          <div class="selector">
            <app-destination-list [destinations]=destinations [selected]=defaultDestination (selectEvent)=selectDestination($event)></app-destination-list>
          </div>

        <button class="btn-primary" (click)="search()">
          <i class="material-icons">search</i>{{ 'browser.searchBtn' | translate }}
        </button>
      </form>
    </ng-container>

    <ng-template #distEmpty>
      {{ 'browser.emptyFilters' | translate }}
    </ng-template>




    <div class="results">

      <app-loading-page *ngIf="searching || searchErrors.length > 0" [errors]="searchErrors" [errorMessage]="'browser.errors.prefix' | translate"
        [loadingMessage]="'browser.loading' | translate"></app-loading-page>

      <ng-container *ngIf="!searching && searchErrors.length === 0  && searchResult.length > 0">
        <app-torrent-browser-item *ngFor="let torrent of searchResult" [torrent]="torrent" [currentDest]="form.getRawValue().destination"></app-torrent-browser-item>
      </ng-container>

      <div *ngIf="!searching && searchErrors.length === 0 && searchResult.length == 0">
        {{ 'browser.searchEmpty' | translate }}
      </div>

    </div>

  </ng-container>







</div>
